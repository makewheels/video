<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>观看视频</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <script type="text/javascript" src="../js/common.js"></script>
    <link href="https://cdn.bootcss.com/mui/3.7.1/css/mui.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/mui/3.7.1/js/mui.min.js"></script>
    <link href="https://cdn.bootcss.com/video.js/7.6.5/video-js.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/video.js/7.6.5/video.min.js"></script>
    <script src="https://cdn.bootcss.com/video.js/7.6.5/lang/en.js"></script>
    <script src="https://cdn.bootcss.com/video.js/7.6.5/lang/zh-CN.js"></script>

</head>
<body>
<h2 id="title"></h2>
<video id="videoId" class="video-js vjs-default-skin" controls preload="auto"
       poster="http://vjs.zencdn.net/v/oceans.png">
    <source id="source" src="" type="video/mp4">
</video>
<h3 id="description"></h3>
<script>
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) {
                return pair[1];
            }
        }
        return (false);
    }

    //获取视频id
    var key = getQueryVariable("key");
    //发送请求，获取视频信息
    mui.ajax(baseUrl + '/video/getVideoInfo?key=' + key, {
        dataType: 'json',
        timeout: 10000,
        success: function (data) {
            document.getElementById("title").innerText = data.title;
            document.getElementById("source").setAttribute("src", data.videoUrl);
            document.getElementById("description").innerText = data.description;
            var player = videojs('videoId', {
                controls: true,
                width: document.body.clientWidth,
                height: 500
            });
        }
    });

    //标题
    //描述
    //播放地址

</script>

</body>
</html>